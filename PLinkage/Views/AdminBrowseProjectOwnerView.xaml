<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PLinkage.Views.AdminBrowseProjectOwnerView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:PLinkage.Models"
    xmlns:viewmodels="clr-namespace:PLinkage.ViewModels"
    Title="Browse Project Owners"
    Shell.NavBarIsVisible="False">

    <Grid ColumnDefinitions="*">
        <ScrollView Grid.Column="0" Padding="50">
            <VerticalStackLayout Spacing="16">
                <!--  Header  -->
                <Border
                    Padding="16"
                    BackgroundColor="#7C4DFF"
                    Stroke="#CCCCCC"
                    StrokeShape="RoundRectangle 12"
                    StrokeThickness="1">
                    <VerticalStackLayout Spacing="4">
                        <Label
                            FontAttributes="Bold"
                            FontSize="18"
                            Text="All Project Owners (Admin View)"
                            TextColor="White" />
                        <Label
                            FontSize="14"
                            Text="Manage and monitor all project owners, including deactivated ones."
                            TextColor="White" />
                    </VerticalStackLayout>
                </Border>

                <!--  Sorting Controls  -->
                <Border
                    Padding="16"
                    BackgroundColor="White"
                    Stroke="#CCCCCC"
                    StrokeShape="RoundRectangle 12"
                    StrokeThickness="1">
                    <VerticalStackLayout Spacing="6">

                        <Label
                            FontAttributes="Bold"
                            FontSize="16"
                            Text="Filter by Category"
                            TextColor="Black" />

                        <Picker
                            Title="Select Category"
                            ItemsSource="{Binding CategorySortOptions}"
                            SelectedItem="{Binding CategorySortSelection}" />

                        <Picker
                            Title="Select Location"
                            IsVisible="{Binding CategorySortSelection, Converter={StaticResource SortToVisibilityConverter}}"
                            ItemsSource="{Binding CebuLocations}"
                            SelectedItem="{Binding SelectedLocation}" />

                        <Label
                            Margin="0,12,0,0"
                            FontAttributes="Bold"
                            FontSize="16"
                            Text="Filter by User Status"
                            TextColor="Black" />

                        <Picker
                            Title="Select Status"
                            ItemsSource="{Binding StatusSortOptions}"
                            SelectedItem="{Binding StatusSortSelection}" />

                    </VerticalStackLayout>
                </Border>

                <!--  Skill Provider List  -->
                <FlexLayout
                    AlignContent="Center"
                    AlignItems="Start"
                    BindableLayout.ItemsSource="{Binding FilteredProjectOwners}"
                    Direction="Row"
                    JustifyContent="Center"
                    Wrap="Wrap">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Margin="0,0,10,10"
                                Padding="12"
                                BackgroundColor="#FFFFFF"
                                MinimumHeightRequest="120"
                                Stroke="#7C4DFF"
                                StrokeShape="RoundRectangle 10"
                                StrokeThickness="1"
                                WidthRequest="340">
                                <Grid ColumnDefinitions="80,*,Auto" ColumnSpacing="10">

                                    <!--  Placeholder BoxView for profile photo  -->
                                    <BoxView
                                        HeightRequest="60"
                                        HorizontalOptions="Center"
                                        VerticalOptions="Center"
                                        WidthRequest="60"
                                        Color="#7C4DFF" />

                                    <VerticalStackLayout
                                        Grid.Column="1"
                                        Spacing="2"
                                        VerticalOptions="Center">
                                        <Label
                                            FontAttributes="Bold"
                                            FontSize="14"
                                            LineBreakMode="WordWrap"
                                            MaxLines="2"
                                            Text="{Binding UserFirstName}"
                                            TextColor="Black" />
                                        <Label
                                            FontSize="14"
                                            LineBreakMode="WordWrap"
                                            MaxLines="2"
                                            Text="{Binding UserLastName}"
                                            TextColor="Black" />
                                        <Label
                                            FontSize="12"
                                            Text="{Binding UserLocation}"
                                            TextColor="Black" />
                                        <Label
                                            FontSize="12"
                                            Text="{Binding UserStatus}"
                                            TextColor="Black" />
                                    </VerticalStackLayout>

                                    <Button
                                        Grid.Column="2"
                                        Padding="10,4"
                                        BackgroundColor="#7C4DFF"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:AdminBrowseProjectOwnerViewModel}}, Path=ViewProjectOwnerCommand}"
                                        CommandParameter="{Binding .}"
                                        CornerRadius="6"
                                        Text="View"
                                        VerticalOptions="Center"
                                        WidthRequest="100" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </FlexLayout>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
